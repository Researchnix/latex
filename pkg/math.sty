
%  math.sty
%
%  Initial Version 09 January 2019
%  Latest Update 23 May 2021
%  Version 1.2.0
%
%  Ceated on 09 January 2019 by
%  Lennart Doppenschmitt     https://github.com/researchnix
%
%  MIT License
%  Copyright (c) 2021
%



\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{math}[2019/01/09 Abbreviations for Mathematics]


% Required Packages
\usepackage{mathtools}
\usepackage{tensor}
\RequirePackage{xparse}
\RequirePackage{imakeidx}
\RequirePackage{xstring}
% \RequirePackage{xcolor}
\RequirePackage{amsmath}
\RequirePackage{amsthm}
\RequirePackage{amssymb}
\RequirePackage{xfrac}
\RequirePackage{pgf,tikz}
\usetikzlibrary{arrows, calc, 3d, positioning, shapes.geometric}

% recommanded by jesse
\RequirePackage{alphabeta}
\RequirePackage{newunicodechar}








% Thesis stuff
% \DeclareDocumentCommand{\bbn}{}{\mathtt{BB}_{0}}
\DeclareDocumentCommand{\bbn}{}{BΓ}
\DeclareDocumentCommand{\lbs}{}{LΓ}
% \DeclareDocumentCommand{\bis}{}{\mathtt{Bis}}
\DeclareDocumentCommand{\bis}{}{Γ}
\DeclareDocumentCommand{\sbis}{}{Γ_{s}}
\DeclareDocumentCommand{\tbis}{}{Γ_{t}}
\DeclareDocumentCommand{\bbh}{}{\widehat{\mathtt{BB}}_{0}}
\DeclareDocumentCommand{\sub}{}{\subseteq}
\DeclareDocumentCommand{\ann}{}{\text{Ann}}
\DeclareDocumentCommand{\ev}{}{\tx{ev}}
\DeclareDocumentCommand{\ufc}{}{\mathcal{A}_{\text{flat}}}
\DeclareDocumentCommand{\bunc}{}{\underline{\mathbb{C}}}
\DeclareDocumentCommand{\tbn}{}{\underline{\mathbb{C}}_{ε}}
\DeclareDocumentCommand{\afce}{}{\mathcal{A}_{\text{flat}}(\underline{\C}_{ε})}






% ####### unicode stuff ####### 

\newunicodechar{∇}{\ensuremath\nabla}
\newunicodechar{∈}{\ensuremath\in}
\newunicodechar{∞}{\ensuremath\infty}
\newunicodechar{⊆}{\ensuremath\subseteq}
\newunicodechar{は}{\ensuremath\varpi}
\newunicodechar{◇}{\ensuremath\diamond}
\newunicodechar{○}{\ensuremath\circ}
%  such that
\newunicodechar{│}{\ensuremath \quad\vert\quad }
\newunicodechar{∧}{\ensuremath\wedge}
\newunicodechar{∫}{\ensuremath\int}
\newunicodechar{س}{\ensuremath\varpi}
 % \newunicodechar{→}{\ensuremath\rightarrow}

\newunicodechar{┴}{\ensuremath^\perp}
\newunicodechar{●}{\ensuremath\bullet}




% environments.
% \newcounter{everything}
% \numberwithin{everything}{section}
% \numberwithin{equation}{subsection}

% \theoremstyle{plain}
% \newtheorem{theorem}[everything]{Theorem}
% \newtheorem{proposition}[everything]{Proposition}
% \newtheorem{lemma}[everything]{Lemma}
% \newtheorem{hope}[everything]{Hope}
% \newtheorem{corollary}[everything]{Corollary}
% \newtheorem{claim}[everything]{Claim}

% \theoremstyle{definition}
% \newtheorem{identity}[everything]{Identity}
% \newtheorem{question}[everything]{Question}
% \newtheorem{definition}[everything]{Definition}
% \newtheorem{example}[everything]{Example}
% \newtheorem{exercise}[everything]{Exercise}
% \newtheorem{situation}[everything]{Situation}
% \newtheorem{idea}[everything]{Idea}
% \newtheorem{goal}[everything]{Goal}
% \newtheorem{calculation}[everything]{Calculation}
% \newtheorem{observation}[everything]{Observation}
% \newtheorem{intuition}[everything]{Intuition}

% \theoremstyle{remark}
% \newtheorem{remark}[everything]{Remark}
% \newtheorem{remarks}[everything]{Remarks}








% Trying to find missing package for \fk 1
% \usepackage{verbatim}
% \RequirePackage{mathrsfs}            % Pretty calligraphy


% general commands
\ProvideDocumentCommand{\Operator}{m o o}{
  \IfValueTF{#2}
    {\IfValueTF{#3}
      {#1_{#2}^{#3}}
      {#1_{#2}}
    }
    {#1}
}



%  Lie algebra of
\DeclareDocumentCommand{\lie}{}{\tx{Lie}}


%  identity hom
\DeclareDocumentCommand{\id}{m}{\tx{id}_{#1}}
%  space of diffeomorphisms
% \DeclareDocumentCommand{\diff}{m O{}}{\tx{Diff}_{#1}^{#2}}
\DeclareDocumentCommand{\diff}{}{\tx{Diff}}
%  image of a hom
\DeclareDocumentCommand{\im}{m}{\tx{im}(#1)}
%  imaginary part
\DeclareDocumentCommand{\Im}{m}{\tx{Im}(#1)}
%  real part
\DeclareDocumentCommand{\Re}{m}{\tx{Re}(#1)}

%  chern connection
\DeclareDocumentCommand{\chc}{}{∇^{\tx{ch}}}

%  holomoprhic sheaf
\DeclareDocumentCommand{\hsh}{O{}}{\mathcal{O}_{#1}}



%----  differentials  ----%

%  dlog
\DeclareDocumentCommand{\dlog}{}{\tx{dlog}}
%  dell
\DeclareDocumentCommand{\dl}{O{}}{\partial_{#1}}
%  dell bar
\DeclareDocumentCommand{\dlb}{}{\bar \partial}
%  unicode dell
\newunicodechar{∂}{\ensuremath\partial}
\newunicodechar{≠}{\ensuremath\neq}

% \newunicodechar{±}{\ensuremath\pm}

%  Lie derivative
\DeclareDocumentCommand{\ld}{m}{\tx{L}_{#1}}










%  topology


%  S1
\DeclareDocumentCommand{\sone}{}{S^1}






%  principal module
\DeclareDocumentCommand{\pmod}{m}{\mod{#1}^*}
%  module
\DeclareDocumentCommand{\mod}{m}{\texttt{mod}_{#1}}











\DeclareDocumentCommand{\smp}{m}{\mathcal{S}_{#1}}
% \DeclareDocumentCommand{\lbs}{m}{\mathcal{L}_{#1}^{\tx{BS}}}
\DeclareDocumentCommand{\lag}{}{\mathtt{Lag}}
\DeclareDocumentCommand{\exb}{m}{\mathcal{L}_{#1}^{\tx{ex}}}
\DeclareDocumentCommand{\lsb}{}{\mathcal{LS}}
\DeclareDocumentCommand{\bis}{}{Γ}
\DeclareDocumentCommand{\poi}{m}{\tx{Pois}_{#1}}
\DeclareDocumentCommand{\tpoi}{m}{\widetilde{\tx{Pois}}_{#1}}
\DeclareDocumentCommand{\xht}{}{\widehat{\fk X}_θ}


\DeclareDocumentCommand{\ev}{}{\text{ev}}


%  differentials
\DeclareDocumentCommand{\dc}{}{d^c}




% text symbols
% \texttt
% \im for important stuff
\DeclareDocumentCommand{\tx}{m}{\text{#1}}
\DeclareDocumentCommand{\cl}{m}{\tx{Cl}_{#1}}
\DeclareDocumentCommand{\mat}{m m}{\tx{Mat}_{#1}(#2)}
\DeclareDocumentCommand{\li}{}{L_{\infty}}
\DeclareDocumentCommand{\ce}{m}{\text{CE}\pn{#1}}


% functors
\DeclareDocumentCommand{\ci}{O{} }{C^{\infty}_{#1}}
\DeclareDocumentCommand{\aut}{m}{\text{Aut}\pn{#1}}
\DeclareDocumentCommand{\fms}{m O{\bullet} }{\Omega _{#1} ^{#2}}
\DeclareDocumentCommand{\ch}{m}{\pb H _{#1}}
\DeclareDocumentCommand{\ho}{m}{\pf H ^{#1}}
\DeclareDocumentCommand{\h}{m}{\bd H (#1)}
\DeclareDocumentCommand{\vf}{m}{\fk X_{#1}}
\DeclareDocumentCommand{\sym}{O{} m}{\text{Sym}_{#1}\pn{#2}}
\DeclareDocumentCommand{\gs}{m m}{H^0 _{#1} (#2)} % global sections



% math fonts
\ProvideDocumentCommand{\cal}{m}{\mathcal{#1}}
\ProvideDocumentCommand{\bb}{m}{\mathbb{#1}}
\ProvideDocumentCommand{\fk}{m}{\mathfrak{#1}}
\ProvideDocumentCommand{\mit}{m}{\mathit{#1}}


% notebook specific
\DeclareDocumentCommand{\tag}{m}{\vspace{10pt} \marginnote{\texttt{#1}}}
% \DeclareDocumentCommand{\q}{m}{\textcolor{rd}{#1}}
% \DeclareDocumentCommand{\highlight}{m}{\textcolor{olive}{#1}}


%  decorations


%  upper bullet
\DeclareDocumentCommand{\bu}{m}{#1^{\bullet}}
%  lower bullet
\DeclareDocumentCommand{\bd}{m}{#1_{\bullet}}
%  dual
\DeclareDocumentCommand{\du}{m}{#1^{\vee}}
%  star
\DeclareDocumentCommand{\st}{m}{#1^{\ast}}
%  transpose
\DeclareDocumentCommand{\tp}{m}{#1^{T}}
%  inverse
\DeclareDocumentCommand{\iv}{m}{#1^{-1}}
%  parentheses inverse
\DeclareDocumentCommand{\pin}{m m}{\pn{#1} ^{#2}}
%  graded sign
\DeclareDocumentCommand{\gs}{m}{(-1) ^{#1}}


% sums and products
\ProvideDocumentCommand{\Dum}{O{} O{}}{\Operator\bigoplus[#1][#2]}
\ProvideDocumentCommand{\Sum}{ O{} O{}}{\Operator\sum[#1][#2]}
% \DeclareDocumentCommand{\ten}{O{}}{\otimes_{#1}}
% replaced by \tp
\DeclareDocumentCommand{\ds}{}{\oplus}
\DeclareDocumentCommand{\m}{}{\cdot}
\DeclareDocumentCommand{\w}{}{\wedge}
\DeclareDocumentCommand{\W}{m O{\bullet}}{\Lambda_{#1} ^{#2}}
\DeclareDocumentCommand{\etc}{}{\dotsc}
\DeclareDocumentCommand{\dts}{}{\dotsm}


% homological algebra
% change dga into cc for chain complex or cochain complex
% maybe also ccx or cx
\DeclareDocumentCommand{\dga}{m m}{\pn{\bu #1, #2}}


% qft
\DeclareDocumentCommand{\itr}{m}{#1_\text{int}}
\DeclareDocumentCommand{\fr}{m}{#1_\text{free}}


% Unsorted
% ordered tuple \otpl or strictly ordered tuple \sot
\DeclareDocumentCommand{\tpl}{m O{n}}{#1 _1, \etc, #1_{#2}}
\ProvideDocumentCommand{\io}{m}{\iota_{#1}}
\DeclareDocumentCommand{\lb}{}{\vspace{10px} \pr}
\DeclareDocumentCommand{\pr}{}{\par \noindent}
\DeclareDocumentCommand{\s}{}{~ \vert ~}
\DeclareDocumentCommand{\tgt}{m}{T _{#1}}
\DeclareDocumentCommand{\ctg}{m}{\st T _{#1}}
\DeclareDocumentCommand{\p}{}{\times}
\DeclareDocumentCommand{\stb}{m}{\tx{stab}_{#1}}
\DeclareDocumentCommand{\orb}{m}{\cal O_{#1}}
\DeclareDocumentCommand{\pb}{m}{{#1}^*}
\DeclareDocumentCommand{\pf}{m}{{#1}_*}
\DeclareDocumentCommand{\qu}{}{\diagup}
\DeclareDocumentCommand{\P}{O{n}}{\bb{P}^{#1}} % projective space
\DeclareDocumentCommand{\Div}{m}{\tx{Div}_{#1}} % divisor group
\DeclareDocumentCommand{\Pic}{m}{\tx{Pic}_{#1}} % Picard group
\DeclareDocumentCommand{\div}{m}{\tx{div}(#1)} % principal divisor






% particular categories
\DeclareDocumentCommand{\cat}{m}{\texttt{#1}}
\DeclareDocumentCommand{\mfd}{}{\texttt{Mfd}_{\infty}}



%  relations

%  similar equal
\DeclareDocumentCommand{\se}{}{\simeq}

%  isomorphic
\DeclareDocumentCommand{\un}{}{\subset}

%  tilde


%  sub group
\DeclareDocumentCommand{\sg}{}{\leq}
\DeclareDocumentCommand{\ni}{}{~\not\in~}
\DeclareDocumentCommand{\not}{}{\slashed}

%  acting on
\DeclareDocumentCommand{\act}{}{\circlearrowright}


% basic math symbols
% \infty



%  binary operations

%  composition
\DeclareDocumentCommand{\o}{}{~ \circ}


%  fibre product
% $ \tensor[_a^4_5]{X}{^b} $  & \\
\DeclareDocumentCommand{\fp}{O{} O{}}{\tensor[_{#1}]{\times}{_{#2}}}
%  tensor product
\DeclareDocumentCommand{\tp}{O{} O{}}{\tensor[_{#1}]{\otimes}{_{#2}}}
%  commutator
\DeclareDocumentCommand{\com}{m m O{}}{#1 #3 #2 - #2 #3 #1}
%  graded commutator
\DeclareDocumentCommand{\gcom}{m m O{} O{}}{#1 #3 #2 -(-1)^{#4} #2 #3 #1}





%  unary operations

\DeclareDocumentCommand{\abs}{m}{\vert #1 \vert}
\DeclareDocumentCommand{\sr}{m}{\sqrt{#1}}
\DeclareDocumentCommand{\nrm}{m}{\parallel #1 \parallel}
\DeclareDocumentCommand{\tr}{m}{\text{tr} \pn{#1} }
\DeclareDocumentCommand{\det}{m}{\text{det} \pn{#1}}
\DeclareDocumentCommand{\rk}{m}{\text{rank} \pn{#1}}
\DeclareDocumentCommand{\exp}{m}{\text{e}^{#1}}



%  categorical constructions

%  hom bifunctor
\DeclareDocumentCommand{\hom}{m}{\text{hom}(#1)}
%  internal hom bifunctor
\DeclareDocumentCommand{\Hom}{m m}{\text{Hom}(#1,#2)}

\DeclareDocumentCommand{\map}{m O{} m}{#1 \xrightarrow{#2} #3}
\DeclareDocumentCommand{\mt}{m m}{#1 \mapsto #2}
\DeclareDocumentCommand{\lmap}{m O{} m}{#1 \xleftarrow{#2} #3}
\DeclareDocumentCommand{\emap}{m O{} m O{} O{}}{
    \begin{align*}
        \map{& #1}[#2]{#3} \\
        \mt{& #4}{#5}
    \end{align*}
}

\DeclareDocumentCommand{\mono}{}{\hookrightarrow}
\DeclareDocumentCommand{\imap}{m O{} m}{#2 : #1 \hookrightarrow #3}
\DeclareDocumentCommand{\mto}{m O{} m}{#2 : #1 \mapsto #3}
\DeclareDocumentCommand{\ra}{}{\rightarrow}
\DeclareDocumentCommand{\xra}{m}{\xrightarrow{#1}}
\DeclareDocumentCommand{\la}{}{\leftarrow}
\DeclareDocumentCommand{\lra}{}{\longrightarrow}
\DeclareDocumentCommand{\rra}{}{\rightrightarrows}
\DeclareDocumentCommand{\ses}{m O{} m O{} m}{\map{0}{#1}\map{}[#2]{#3}\map{}[#4]{#5}\map{}{0}}
\DeclareDocumentCommand{\igpd}{m m}{#1 \rra #2}
\DeclareDocumentCommand{\adj}{m m O{} O{}}{#3 : #1 \leftrightarrows #2 : #4}

% \DeclareDocumentCommand{\adj}{m m O{} O{}}{
% \begin{center}
% \begin{tikzpicture}[scale=1.5]
% \node (A) at (0,0) {$#1$};
% \node (B) at (1,0) {$#2$};
% \draw[->](.1,.1) -- node[above] {$#3$} (B.160);
% \draw[->](B.200) -- node[below] {$#4$} (A.340);
% \end{tikzpicture}
% \end{center}
% }





% special letters and symbols
\DeclareDocumentCommand{\g}{}{\fk g}
\ProvideDocumentCommand{\T}{}{\cal T}
\DeclareDocumentCommand{\O}{}{\cal O}
\DeclareDocumentCommand{\ha}{}{\frac{1}{2}}
\DeclareDocumentCommand{\sha}{}{\sfrac{1}{2}}
\DeclareDocumentCommand{\rd}{}{\frac{1}{3}}
\DeclareDocumentCommand{\srd}{}{\sfrac{1}{3}}
\DeclareDocumentCommand{\qt}{}{\frac{1}{4}}
\DeclareDocumentCommand{\sqt}{}{\sfrac{1}{4}}


% special unit symbols
\ProvideDocumentCommand{\U}{}{\fk 1}
\DeclareMathOperator{\spn}{span}


% standard number fields.
\DeclareDocumentCommand{\N}{}{\bb{N}} % Natural
\DeclareDocumentCommand{\Z}{}{\bb{Z}} % Integer
\DeclareDocumentCommand{\Q}{}{\bb{Q}} % Rational
\DeclareDocumentCommand{\R}{}{\bb{R}} % Real
\DeclareDocumentCommand{\Rn}{}{\bb{R}^n} % Real
\DeclareDocumentCommand{\C}{}{\bb{C}} % Complex
\DeclareDocumentCommand{\F}{}{\bb{F}} % Finite
\DeclareDocumentCommand{\K}{}{\bb{K}} % Generic
\DeclareDocumentCommand{\HH}{}{\bb{H}} % Quaternions


% math operators
% combine \com and \gcom
\DeclareDocumentCommand{\Int}{O{} O{}}{\int _{#1} ^{#2}}
\DeclareDocumentCommand{\dbd}{O{} m}{\frac{d #1}{d #2}}
\ProvideDocumentCommand{\nb}{O{}}{\nabla_{$1}}
\DeclareDocumentCommand{\D}{}{\Delta}



%%% TIKZ DIAGRAMS %%%
% product diagram
% commutative parallelogram: cpl
% grindelwald diagram (universality for product): cgw
% commutative pentragram: cpg
% cones ...
% redo the \ses

% groupoid
\DeclareDocumentCommand{\gpd}{m O{} O{} m}{
\begin{center}
\begin{tikzpicture}[scale=0.7]
\node[] (G) at (0,2) {$#1$};
\node[] (X) at (0,0) {$#4$};
\node[] (A) at (0,1.9) {};
\node[] (B) at (0,0.1) {};
\draw[-open triangle 45] (A.220) -- node[left] {$#2$} (B.140);
\draw[-open triangle 45] (A.320) -- node[right] {$#3$} (B.40);
\end{tikzpicture}
\end{center}
}

% principal G-bundle
\DeclareDocumentCommand{\gb}{O{G} m m}{    % principal G-bundle
\begin{center}
\begin{tikzpicture}[scale=1]
\node[] (G) at (0,1) {$#1$};
\node[] (P) at (1,1) {$#2$};
\node[] (B) at (1,0) {$#3$};
\draw[-open triangle 45] (G) -- (P);
\draw[-open triangle 45] (P) -- (B);
\end{tikzpicture}
\end{center}
}

% commutative (factoring) triangle
\DeclareDocumentCommand{\ftr}{m O{} m O{} m O{}}{
\begin{center}
\begin{tikzpicture}[scale=1]
\node[] (a) at (0,2) {$#1$};
\node[] (b) at (2.8,2) {$#3$};
\node[] (c) at (1.4,0) {$#5$};
\draw[-open triangle 45] (a) -- node[above] {$#2$} (b);
\draw[-open triangle 45] (a) -- node[below left] {$#4$} (c);
\draw[open triangle 45-] (b) -- node[below right] {$#6$} (c);
\end{tikzpicture}
\end{center}
}

% commutative (base) triangle
\DeclareDocumentCommand{\btr}{m O{} m O{} m O{}}{
\begin{center}
\begin{tikzpicture}[scale=1]
\node[] (a) at (0,2) {$#1$};
\node[] (b) at (2.8,2) {$#3$};
\node[] (c) at (1.4,0) {$#5$};
\draw[-open triangle 45] (a) -- node[above] {$#2$} (b);
\draw[-open triangle 45] (a) -- node[below left] {$#4$} (c);
\draw[-open triangle 45] (b) -- node[below right] {$#6$} (c);
\end{tikzpicture}
\end{center}
}

% commutative triangle
\DeclareDocumentCommand{\ctr}{m O{} m O{} m O{}}{
\begin{center}
\begin{tikzpicture}[scale=1]
\node[] (a) at (0,2) {$#1$};
\node[] (b) at (2,2) {$#3$};
\node[] (c) at (2,0) {$#5$};
\draw[-open triangle 45] (a) -- node[above] {$#2$} (b);
\draw[-open triangle 45] (b) -- node[right] {$#4$} (c);
\draw[-open triangle 45] (a) -- node[below left] {$#6$} (c);
\end{tikzpicture}
\end{center}
}

% commutative square
\DeclareDocumentCommand{\csq}{m O{} O{} m O{} m O{} m}{
\begin{center}
\begin{tikzpicture}[scale=1]
\node[] (a) at (0,2) {$#1$};
\node[] (b) at (2,2) {$#4$};
\node[] (c) at (0,0) {$#6$};
\node[] (d) at (2,0) {$#8$};
\draw[-open triangle 45] (a) -- node[above] {$#2$} (b);
\draw[-open triangle 45] (a) -- node[left] {$#3$} (c);
\draw[-open triangle 45] (b) -- node[right] {$#5$} (d);
\draw[-open triangle 45] (c) -- node[below] {$#7$} (d);
\end{tikzpicture}
\end{center}
}


% homotopy equivalence data
\DeclareDocumentCommand{\hoe}{m O{} O{} m}{
\begin{center}
\begin{tikzpicture}[scale=1]
\node[] (G) at (0,0) {$#1$};
\node[] (X) at (2,0) {$#4$};
\node[] (A) at (0.1,0) {};
\node[] (B) at (1.9,0) {};
\draw[-open triangle 45] (A.40) -- node[above] {$#2$} (B.140);
\draw[open triangle 45-] (A.320) -- node[below] {$#3$} (B.220);
\end{tikzpicture}
\end{center}
}



% delimeter

%  at
\DeclareDocumentCommand{\at}{m}{\big \vert_{#1}}
\DeclareDocumentCommand{\At}{m}{\bigg \vert_{#1}}

%  angle brackets
\DeclareDocumentCommand{\ab}{m}{\langle #1 \rangle}

%  parentheses
\DeclareDocumentCommand{\pn}{m}{\left( #1 \right)}

%   curly braces
\DeclareDocumentCommand{\cb}{m}{\left\{ #1 \right\}}

%  square brackets
\DeclareDocumentCommand{\sb}{m}{\left[ #1 \right]}






%%% COLOURS %%%

% % custom colours
% \definecolor{gry}{HTML}{525252}
% \definecolor{rd}{HTML}{882B21}
% \definecolor{ble}{HTML}{394773}

% % colour commands
% \DeclareDocumentCommand{\ble}{m}{\textcolor{ble}{#1}}
% \DeclareDocumentCommand{\gry}{m}{\textcolor{gry}{#1}}
% \DeclareDocumentCommand{\red}{m}{\textcolor{rd}{#1}}
